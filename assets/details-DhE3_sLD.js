import{w as o}from"./with-props-BsLfJs0C.js";import{r as n,l as e,t as m}from"./chunk-IR6S3I6Y-Dtf6j6yn.js";import{c as h}from"./client-B7H3YcT4.js";function x({symbol:t}){const a=n.useRef(null);return n.useEffect(()=>{if(!a.current)return;a.current.innerHTML="";const s=document.createElement("script");s.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",s.type="text/javascript",s.async=!0;const r={autosize:!0,symbol:`${t.toUpperCase()}USDT`,interval:"1",theme:"dark",style:"3",locale:"en",hide_side_toolbar:!1,allow_symbol_change:!0,save_image:!1,calendar:!1,support_host:"https://www.tradingview.com"};s.innerHTML=JSON.stringify(r),a.current.appendChild(s)},[t]),e.jsxs("div",{className:"tradingview-widget-container",ref:a,style:{height:"100%",width:"100%"},children:[e.jsx("div",{className:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}}),e.jsx("div",{className:"tradingview-widget-copyright",children:e.jsx("a",{href:"https://www.tradingview.com/",rel:"noopener nofollow",target:"_blank",children:e.jsx("span",{className:"blue-text",children:"Track all markets on TradingView"})})})]})}async function u(t){return await h.get(`coins/${t}`,{params:{localization:"false",tickers:"false",market_data:"true",community_data:"true",developer_data:"true",sparkline:"false"}})}const f=({coinId:t})=>{const[a,s]=n.useState(null),[r,l]=n.useState(!0),[i,c]=n.useState(null);return n.useEffect(()=>{(async()=>{if(t)try{s(await u(t)),c(null)}catch(d){c(d instanceof Error?d.message:"Failed to fetch coin details"),s(null)}finally{l(!1)}})()},[t]),{coinDetails:a,isLoading:r,error:i}};function _({}){return[{title:"Coin Details"},{name:"description",content:"Detailed view of cryptocurrency coin"}]}const N=o(function(){const{coinId:a}=m(),{coinDetails:s,isLoading:r,error:l}=f({coinId:a||""});return r?e.jsx("main",{className:"flex flex-col items-center justify-center min-h-[70vh] w-full",children:e.jsx("h1",{className:"text-center text-3xl",children:"Loading..."})}):l?e.jsxs("main",{className:"flex flex-col items-center justify-center min-h-[70vh] w-full",children:[e.jsx("h1",{className:"text-center text-3xl text-destructive",children:l}),e.jsx("h2",{className:"text-center text-muted-foreground",children:"try again in couple seconds"})]}):s?e.jsxs("main",{className:"max-w-7xl p-4 mx-auto flex flex-col space-y-4 md:flex-row md:space-x-4",children:[e.jsxs("section",{className:"w-full md:w-sm flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.image.large,alt:s.name,className:"w-16 h-16"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[s.name," (",s.symbol.toUpperCase(),")"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Market Cap Rank: #",s.market_cap_rank]})]})]}),e.jsxs("div",{className:"bg-card p-4 rounded shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Price Data"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Current Price:"})," $",s.market_data.current_price.usd]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"24h Change:"})," ",s.market_data.price_change_percentage_24h!=null?s.market_data.price_change_percentage_24h.toFixed(2):"N/A","%"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"7d Change:"})," ",s.market_data.price_change_percentage_7d!=null?s.market_data.price_change_percentage_7d.toFixed(2):"N/A","%"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Market Cap:"})," $",s.market_data.market_cap.usd.toLocaleString()]})]}),e.jsxs("div",{className:"bg-card p-4 rounded shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Useful Links"}),e.jsx("ul",{className:"list-disc list-inside",children:s.links.homepage.filter(Boolean).map((i,c)=>e.jsx("li",{children:e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:new URL(i).hostname})},c))})]})]}),e.jsxs("section",{className:"bg-card w-full h-fit rounded shadow p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chart"}),e.jsx("div",{className:"w-full h-96",children:e.jsx(x,{symbol:s.symbol})}),e.jsxs("div",{className:"bg-card p-4 rounded shadow",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["About ",s.name]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:s.description.en},className:"prose dark:prose-dark"})]})]})]}):e.jsx("main",{className:"flex flex-col items-center justify-center min-h-[70vh] w-full",children:e.jsx("h1",{className:"text-center text-3xl",children:"Coin not found..."})})});export{N as default,_ as meta};
