import{w as C}from"./with-props-BsLfJs0C.js";import{r,l as e,L as _,q as P}from"./chunk-IR6S3I6Y-Dtf6j6yn.js";import{c as E}from"./client-B7H3YcT4.js";import{c as n,b}from"./button-bnZRFECM.js";import{c as h}from"./createLucideIcon-C1UKhzfT.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],S=h("ChevronLeft",L);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],k=h("ChevronRight",$);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],I=h("Ellipsis",R);async function T(s){return await E.get("coins/markets",{params:{vs_currency:"usd",order:"market_cap_desc",per_page:"100",page:s.toString(),sparkline:"false"}})}const f="tokenList";class F{Get(a){let t=[];const c=sessionStorage.getItem(`${f}-${a}`);return c&&(t=JSON.parse(c)),t}Insert(a,t){localStorage.setItem(f,JSON.stringify(a)),sessionStorage.setItem(`${f}-${t}`,JSON.stringify(a))}}const g=new F,D=new Error("no tokens");function G({currentPage:s=1}){const[a,t]=r.useState([]),[c,m]=r.useState(!0),[p,o]=r.useState(null);return r.useEffect(()=>{(async()=>{const i=g.Get(s);if(i.length){t(i),m(!1);return}try{const l=await T(s);if(!l.length){o(D.message);return}g.Insert(l,s),t(l),o(null)}catch(l){o(l.message)}finally{m(!1)}})()},[s]),{tokens:a,isLoading:c,error:p,currentPage:s}}const u=({className:s,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:n("mx-auto flex w-full justify-center",s),...a});u.displayName="Pagination";const N=r.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,className:n("flex flex-row items-center gap-1",s),...a}));N.displayName="PaginationContent";const d=r.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,className:n("",s),...a}));d.displayName="PaginationItem";const x=({className:s,isActive:a,size:t="icon",...c})=>e.jsx("a",{"aria-current":a?"page":void 0,className:n(b({variant:a?"outline":"ghost",size:t}),s),...c});x.displayName="PaginationLink";const j=({className:s,...a})=>e.jsxs(x,{"aria-label":"Go to previous page",size:"default",className:n("gap-1 pl-2.5",s),...a,children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});j.displayName="PaginationPrevious";const y=({className:s,...a})=>e.jsxs(x,{"aria-label":"Go to next page",size:"default",className:n("gap-1 pr-2.5",s),...a,children:[e.jsx("span",{children:"Next"}),e.jsx(k,{className:"h-4 w-4"})]});y.displayName="PaginationNext";const w=({className:s,...a})=>e.jsxs("span",{"aria-hidden":!0,className:n("flex h-9 w-9 items-center justify-center",s),...a,children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});w.displayName="PaginationEllipsis";const v=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:n("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));v.displayName="Card";const z=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:n("flex flex-col space-y-1.5 p-6",s),...a}));z.displayName="CardHeader";const A=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:n("text-2xl font-semibold leading-none tracking-tight",s),...a}));A.displayName="CardTitle";const J=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:n("text-sm text-muted-foreground",s),...a}));J.displayName="CardDescription";const O=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:n("p-6 pt-0",s),...a}));O.displayName="CardContent";const q=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:n("flex items-center p-6 pt-0",s),...a}));q.displayName="CardFooter";function H({token:s}){return e.jsx(_,{to:`/coins/${s.id}`,children:e.jsx(v,{className:"my-2 border-border",children:e.jsxs("div",{className:"py-2 px-4 flex items-center space-x-4",children:[e.jsx("img",{src:s.image??"",alt:s.name??"No image",className:"h-12 w-12 rounded"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold",children:s.name??"Unknown"}),e.jsx("span",{className:"text-xs text-gray-600",children:s.symbol??"N/A"})]}),e.jsxs("div",{className:"ml-auto flex flex-row space-x-4 items-end",children:[e.jsx("span",{className:"font-bold",children:s.current_price!=null?`$${s.current_price}`:"N/A"}),e.jsx("span",{className:(s.price_change_percentage_24h??0)>=0?"text-green-500":"text-red-500",children:s.price_change_percentage_24h!=null?`${s.price_change_percentage_24h.toFixed(2)}%`:"N/A"})]})]})})})}function Q({}){return[{title:"explore"},{name:"description",content:"Explore coins"}]}const W=C(function(){const[a]=P(),t=a.get("page"),c=t&&!isNaN(parseInt(t,10))?parseInt(t,10):1,{tokens:m,isLoading:p,error:o,currentPage:i}=G({currentPage:c});return e.jsxs("main",{className:"max-w-[1200px] p-4 mx-auto",children:[p&&e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] w-full",children:e.jsx("h1",{className:"text-center text-3xl",children:"Loading..."})}),o&&e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] w-full",children:[e.jsx("h1",{className:"text-center text-3xl text-destructive",children:o}),e.jsx("h2",{className:"text-center text-muted-foreground",children:"try again in couple seconds"})]}),!p&&!o&&e.jsxs(e.Fragment,{children:[m.map(l=>e.jsx(H,{token:l})),e.jsx(u,{children:e.jsxs(N,{children:[i>1&&e.jsxs(e.Fragment,{children:[e.jsx(d,{children:e.jsx(j,{href:`?page=${i-1}`})}),e.jsx(d,{children:e.jsx(x,{href:"?page=1",children:"1"})}),e.jsx(d,{children:e.jsx(w,{})})]}),e.jsx(d,{children:e.jsx(x,{href:`?page=${i}`,isActive:!0,children:i})},i),e.jsx(d,{children:e.jsx(y,{href:`?page=${i+1}`})})]})})]})]})});export{W as default,Q as meta};
